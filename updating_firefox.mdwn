[[!meta title="Updating Firefox for a Webconverger developer"]]

First work out the current version from <https://getfirefox.com>

Get the 32bit version

	ver=41.0; wget "https://download.mozilla.org/?product=firefox-$ver-SSL&os=linux" -O firefox-$ver.tar.bz2
	open https://www.mozilla.org/en-US/firefox/$ver/releasenotes/

	cd /tmp
	tar zxvf ~/Downloads/firefox-$ver.tar.bz2

	sudo mv firefox ~/debian/jessie-chroot/root/Debian-Live-config/webconverger/chroot/tmp/
	/opt# mv firefox/ firefox-old
	/opt# mv /tmp/firefox/ .

Using the **firefox-i18n** packaging from Archlinux:

	cp -r /var/abs/extra/firefox-i18n /tmp
	cd /tmp/firefox-i18n
	makepkg -o
	mkdir /tmp/exts
	/tmp/firefox-i18n$ for i in *.xpi; do unzip -d /tmp/exts/$(unzip -p $i install.rdf | grep -m 1 -H em:id  | sed 's,.*em:id=",,' | sed 's,"$,,') $i; done
	cd /tmp/exts
	rsync -a --delete . ~/debian/jessie-chroot/root/Debian-Live-config/webconverger/chroot/opt/firefox/langpacks/

Check for invalid XML: `find -name '*.xml' -o -name '*.rdf' | xargs xmlstarlet val | grep inv`

Delete searchplugins since they are not needed, except DDG.

# Doing an update

	/opt# cp -ra firefox-old/browser/extensions/ firefox/browser/
	/opt# cp -ra firefox-old/browser/defaults/ firefox/browser/
	/opt# cp -ra firefox-old/distribution/ firefox/

Remove crash reporter

	vim firefox/application.ini

Make sure nothing is deleted / missing. Otherwise you might get a strange error
message, like please contact your system administrator.

	git checkout firefox/mozilla.cfg
	git checkout firefox/browser/searchplugins/DDG.xml
